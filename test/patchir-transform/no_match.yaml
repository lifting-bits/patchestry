# Test specification: spec that intentionally matches nothing
# Verifies that patchir-transform succeeds (exit 0) and produces
# output identical to the input when no operations match.
apiVersion: patchestry.io/v1

metadata:
  name: "no-match-test"
  description: "Spec targeting a function that does not exist in the CIR"
  version: "1.0.0"
  author: "Security Team"
  created: "2025-07-28"

libraries:
  - "patches/measurement_update_patch.yaml"

target:
  binary: "test_binary.bin"
  arch: "ARM:LE:32"

meta_patches:
  - name: "no_match_meta_patches"
    description: "Attempts to match a function that is not present"

    patch_actions:
      - id: "NO-MATCH-001"
        description: "This match should find no targets"

        match:
          - name: "nonexistent_function_xyz_abc_123"
            kind: "function"

        action:
          - mode: "apply_before"
            patch_id: "measurement_update_before_patch"
            arguments:
              - name: "function_argument"
                source: "variable"
                symbol: "var6"
