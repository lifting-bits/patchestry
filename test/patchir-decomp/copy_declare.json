// RUN: bash %strip-json-comments %s > %t.json
// RUN: %patchir-decomp -input %t.json -use-rellic-transform=false -emit-cir -emit-llvm -output %t >> /dev/null 2>&1
// RUN: %file-check -vv -check-prefix=CIR %s --input-file %t.cir
// RUN: %file-check -vv -check-prefix=LL  %s --input-file %t.ll
// CIR: cir.func @copy_declare_test
// CIR: cir.alloca
// CIR: cir.store
// CIR: cir.load
// LL: define dso_local i32 @copy_declare_test
// LL: alloca i32
// LL: store i32
// LL: load i32
{
  "architecture": "ARM",
  "id": "ARM:LE:32:Cortex",
  "format": "Executable and Linking Format (ELF)",
  "functions": {
    "ram:10000000": {
      "name": "copy_declare_test",
      "is_intrinsic": false,
      "type": {
        "return_type": "type_int",
        "is_variadic": false,
        "is_noreturn": false,
        "parameter_types": ["type_int"]
      },
      "basic_blocks": {
        "ram:10000000:entry": {
          "operations": {
            "p0": { "mnemonic": "DECLARE_PARAMETER", "name": "a", "type": "type_int", "kind": "parameter", "index": 0 },
            "local0": { "mnemonic": "DECLARE_LOCAL", "kind": "local", "name": "my_local", "type": "type_int" },
            "temp0": { "mnemonic": "DECLARE_TEMPORARY", "name": "my_temp", "kind": "temporary", "type": "type_int", "address": "ram:10000000:0:basic:copy_op" },
            "br": { "mnemonic": "BRANCH", "target_block": "ram:10000000:0:basic" }
          },
          "ordered_operations": ["p0", "local0", "temp0", "br"]
        },
        "ram:10000000:0:basic": {
          "operations": {
            "copy_op": {
              "mnemonic": "COPY",
              "type": "type_int",
              "inputs": [{ "type": "type_int", "kind": "parameter", "operation": "p0" }]
            },
            "store_op": {
              "mnemonic": "COPY",
              "type": "type_int",
              "output": { "kind": "local", "operation": "local0" },
              "inputs": [{ "type": "type_int", "kind": "temporary", "operation": "copy_op" }]
            },
            "ret": {
              "mnemonic": "RETURN",
              "inputs": [{ "type": "type_int", "kind": "local", "operation": "local0" }]
            }
          },
          "ordered_operations": ["copy_op", "store_op", "ret"]
        }
      },
      "entry_block": "ram:10000000:entry"
    }
  },
  "globals": {},
  "types": {
    "type_int": { "name": "unsigned int", "size": 4, "kind": "integer" }
  }
}
